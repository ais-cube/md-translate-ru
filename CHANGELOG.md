# Changelog

## [1.3.0] - 2026-02-21

### Добавлено

- **Единый пайплайн** (`run.py`) - одна команда: документ на входе -> перевод -> все форматы на выходе
  - Поддержка входных форматов: .md, .docx, .pdf
  - Выбор языка перевода: 11 языковых пар (EN-RU, RU-EN, EN-DE, EN-ES, EN-FR, EN-ZH, EN-JA и др.)
  - Интерактивное меню с пошаговой настройкой
  - Прогноз стоимости и времени перед запуском
  - Генерация DOCX через python-docx (заголовки, таблицы, списки, code blocks)
  - Сборка нескольких файлов в один выходной документ
- **Мульти-формат выход** (`convert.py`) - генерация PDF + HTML + MD из переведенных файлов
- **Локальные шрифты** (`fonts/`) - DejaVu Sans, DejaVu Sans Mono, Liberation Sans с полной кириллицей
- PDF-генератор с поддержкой заголовков, таблиц, code blocks, списков, цитат
- HTML-генератор с адаптивным дизайном и print-friendly стилями
- Интерактивное меню в `convert.py` (автопоиск папок, выбор формата)

### Изменено

- `requirements.txt` - добавлены `fpdf2`, `markdown`, `pymdown-extensions`, `python-docx`, `pdfplumber`
- `.gitignore` - добавлены `output/`, `docs_ru/`, сохранены шрифты

### Исправлено

- Batch API: sanitize custom_id (убраны точки и спецсимволы)

## [1.2.0] - 2026-02-20

### Добавлено

- **Интерактивное меню** с выбором действий при запуске без аргументов
- **Контроль бюджета** (`--budget 5.00`) - перевод останавливается, если следующий файл не укладывается в остаток
- **Прогноз перед запуском** - таблица с оценкой времени и стоимости по каждому файлу
- **Описание файлов** - краткое описание и метаданные перед переводом каждого файла
- **Graceful interrupt** (Ctrl+C) - остановка после текущего файла, повторный Ctrl+C - немедленный выход
- **Rich CLI** - цветной вывод, прогресс-бар, панели (fallback на plain text без `rich`)
- Флаг `--no-interactive` для CI/CD

### Изменено

- `requirements.txt` - добавлена зависимость `rich>=13.0.0`

## [1.1.0] - 2026-02-20

### Добавлено

- Скрипт `translate_images.py` - перевод изображений через Claude Vision API
- Структурированный Markdown-выход: тип, описание, текстовые элементы EN -> RU, alt-текст
- Автоматический сбор alt-текстов из docs_en/*.md
- Единый JSON (`image_translations.json`) и сводная таблица (`image_summary.md`)
- Batch API для изображений
- Пример выходного файла `examples/images_ru_text/fig-006.md`

## [1.0.0] - 2026-02-20

### Добавлено

- Основной скрипт перевода `translate_api.py`
- Поддержка глоссариев (`glossary.json`)
- Автоматическая разбивка больших файлов на чанки по заголовкам
- Anti-AI cleanup через HUMANIZER.md
- Batch API для двукратной экономии
- Dry-run режим для оценки стоимости
- Сбор терминов-кандидатов в `glossary_candidates.json`
- Примеры в `examples/`
